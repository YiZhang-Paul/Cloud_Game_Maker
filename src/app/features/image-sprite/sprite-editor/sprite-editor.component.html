<div class="container" fxLayout="column" fxLayoutAlign="start center" fxLayoutGap="15px">
    <div fxLayoutAlign="center center" fxFlex="7.5">
        <span>{{ file.name }}</span>
    </div>

    <ng-content></ng-content>
    <button (click)="cancel.emit()">X</button>

    <div fxLayout="row" fxFlex>
        <div fxLayout="column" fxLayoutAlign="start center" fxLayoutGap="7px" fxFlex="15">
            <button (click)="mode = modes.Readonly">View</button>
            <button (click)="onImageCropStart()">Crop</button>

            <ng-container *ngIf="mode === modes.Crop">
                <button (click)="onImageRotate()">Rotate 90Â°</button>
                <button (click)="onImageFlip()">Flip Horizontally</button>
                <button (click)="onImageFlip(true)">Flip Vertically</button>
            </ng-container>
        </div>

        <div [ngSwitch]="mode"
            fxLayout="column"
            fxLayoutAlign="start center"
            fxLayoutGap="15px"
            fxFlex="85">

            <app-image-display-panel *ngSwitchCase="modes.Readonly" [file]="file.raw"></app-image-display-panel>

            <image-cropper *ngSwitchCase="modes.Crop"
                format="png"
                [imageFile]="targetImage"
                [autoCrop]="false"
                [transform]="imageTransform"
                (imageCropped)="onImageCropped($event)">
            </image-cropper>
        </div>
    </div>
</div>
